!function(t,n,e,a){var i="accordion",o={transitionSpeed:300,transitionEasing:"ease",controlElement:"[data-control]",contentElement:"[data-content]",groupElement:"[data-accordion-group]",singleOpen:!0};function s(n,e){this.element=n,this.options=t.extend({},o,e),this._defaults=o,this._name=i,this.init()}s.prototype.init=function(){var a,i,o,s,r=this.options,c=t(this.element),d=c.find("> "+r.controlElement),h=c.find("> "+r.contentElement),l=c.parents("[data-accordion]").length>0,f={"max-height":0,overflow:"hidden"},m=function(){var t=(e.body||e.documentElement).style,n="transition";if("string"==typeof t[n])return!0;var a=["Moz","webkit","Webkit","Khtml","O","ms"];n="Transition";for(var i=0;i<a.length;i++)if("string"==typeof t[a[i]+n])return!0;return!1}();function g(t,n){n?h.css({"-webkit-transition":"",transition:""}):h.css({"-webkit-transition":"max-height "+r.transitionSpeed+"ms "+r.transitionEasing,transition:"max-height "+r.transitionSpeed+"ms "+r.transitionEasing})}function u(n){var e=0;n.children().each(function(){e+=t(this).outerHeight(!0)}),n.data("oHeight",e)}function p(n,e,a,i){var o,s=n.filter(".open").find("> [data-content]"),c=s.find("[data-accordion].open > [data-content]");r.singleOpen||(c=c.not(e.siblings("[data-accordion].open").find("> [data-content]"))),o=s.add(c),n.hasClass("open")&&o.each(function(){var n=t(this).data("oHeight");switch(i){case"+":t(this).data("oHeight",n+a);break;case"-":t(this).data("oHeight",n-a);break;default:throw"updateParentHeight method needs an operation"}t(this).css("max-height",t(this).data("oHeight"))})}function v(t){if(t.hasClass("open")){var n=t.find("> [data-content]"),e=n.find("[data-accordion].open > [data-content]"),a=n.add(e);u(a),a.css("max-height",a.data("oHeight"))}}function E(t,n){if(t.trigger("accordion.close"),m){if(l)p(t.parents("[data-accordion]"),t,n.data("oHeight"),"-");n.css(f),t.removeClass("open")}else n.css("max-height",n.data("oHeight")),n.animate(f,r.transitionSpeed),t.removeClass("open")}function H(t,e){if(t.trigger("accordion.open"),m){if(g(),l)p(t.parents("[data-accordion]"),t,e.data("oHeight"),"+");a=function(){e.css("max-height",e.data("oHeight"))},n.requestAnimationFrame?requestAnimationFrame(a):n.webkitRequestAnimationFrame?webkitRequestAnimationFrame(a):n.mozRequestAnimationFrame?mozRequestAnimationFrame(a):setTimeout(a,1e3/60),t.addClass("open")}else e.animate({"max-height":e.data("oHeight")},r.transitionSpeed,function(){e.css({"max-height":"none"})}),t.addClass("open");var a}function x(){var n=!!r.singleOpen&&c.parents(r.groupElement).length>0;u(h),n&&function(n){n.closest(r.groupElement);var e=n.siblings("[data-accordion]").filter(".open"),a=e.find("[data-accordion]").filter(".open"),i=e.add(a);i.each(function(){var n=t(this),e=n.find(r.contentElement);E(n,e)}),i.removeClass("open")}(c),c.hasClass("open")?E(c,h):H(c,h)}h.each(function(){var n=t(this);0!=n.css("max-height")&&(n.closest("[data-accordion]").hasClass("open")?(g(),u(n),n.css("max-height",n.data("oHeight"))):n.css({"max-height":0,overflow:"hidden"}))}),c.attr("data-accordion")||(c.attr("data-accordion",""),c.find(r.controlElement).attr("data-control",""),c.find(r.contentElement).attr("data-content","")),d.on("click",x),d.on("accordion.toggle",function(){if(r.singleOpen&&d.length>1)return!1;x()}),d.on("accordion.refresh",function(){v(c)}),t(n).on("resize",(a=function(){v(c)},function(){var t=this,n=arguments;s?clearTimeout(s):o&&a.apply(t,n),s=setTimeout(function(){o||a.apply(t,n),s=null},i||100)}))},t.fn[i]=function(n){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new s(this,n))})}}(jQuery,window,document);
